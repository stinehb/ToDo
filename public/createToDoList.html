<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>ToDoList</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>

    <!----------- HTML-elements -------------->
    <h1>To Do List</h1>
    <p>On this page you can write down important things you need to remember. <br>For example a shopping list.</p><br>
    <input id="inpHeading" type="text" placeholder="write a text here"/>
    <button id="newCheckbox">+</button>
    
    <div id="container"></div>
    
        
    <!------------- JavaScript --------------->
    <script>

      
      let inpHeading = document.getElementById('inpHeading');
       let newCheckboxBtn = document.getElementById("newCheckBox");
       let container = document.getElementById("container");
<<<<<<< Updated upstream
       let items= localStorage.getItem("items");
       let token = localStorage.getItem("token");

       async function createToDoList(evt) {

        let url= "/createNewList";

        try {
            let response = await fetch(url);
                let data = await response.json();
                
                if (response.status != 200) {
                    throw data.error;
                }

                container.innerHTML = ""; //delete previous content
                
                for (let value of data) {

                  

                    let html = "<h2>" + value.heading + "</h2>";
                    html += "<p>" + date.toLocaleDateString() + "</p>";
                    html += "<p>" + value.blogtext + "</p><hr>";

                    let div = document.createElement("div");
                    div.innerHTML = html;
                    container.appendChild(div);
        }
=======
       let items = [];
     

      


       newCheckboxBtn.addEventListener("click", function (evt) {

        let inputForCheckbox = document.createElement("input");
         inputForCheckbox.type = "text";

         let todo = {
            text: inputForCheckbox.value,
            id: Date.now(),
         };
>>>>>>> Stashed changes

         items.push(todo);

        let delBtn = document.createElement("button");
        delBtn.addEventListener("click",function(evt) {
            item.splice(todo,1);
        });

<<<<<<< Updated upstream
        
=======
       });

       async function createToDoList(evt) {
        let url= "/createNewList";
        let token = localStorage.getItem("token");
>>>>>>> Stashed changes

       
        let updata = {
            heading: inpHeading.value,
            body: JSON.stringify(items)
        }

        let cfg = {
<<<<<<< Updated upstream
            method:"GET",
=======
            method:"POST",
>>>>>>> Stashed changes
            headers: {"authorization" : token},
            body: JSON.stringify(updata)
        }

        try {
            let response =await fetch (url, cfg);
            let data= await response.json();

            if(response.status != 200) {
                throw data.error;
            }


    
    } 
    catch(error) {
        console.log(error);
    }

       }
<<<<<<< Updated upstream
    }
        

      


       newCheckboxBtn.addEventListener("click", function (evt) {

       
        //vis alle items i listA


       // delBtn.className="deleteList";
        //delBtn.className+="fa fa-trash";
=======
>>>>>>> Stashed changes
        
        delBtn.addEventListener("click",function(evt) {
            item.splice(todo.id,1);
        })

       });

      

       
        //alle  her skal legges til json fil for å bli lagret i databasen, for å kunne komme tilbke til den i showToDoLists.html
    </script>

    <!---------------- CSS ------------------->
    <style>        
* {
            text-align: center;
            margin: 0;
            font-family: sans-serif;
            background-color:rgb(163, 155, 144);
            color: rgb(9, 15, 12);
        }   
        input{
          background-color: rgb(248, 244, 239);
          opacity: 1;
      }
      button{
          background-color: rgb(47, 185, 34);
          border-radius: 90%;
      }
    </style>

</body>

</html>