<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>ToDoList</title>
</head>
<body>

    <!----------- HTML-elements -------------->
    <h1>To Do List</h1>
    <p>info om side</p><br>
    <input id="inpHeading" type="text" /><br>
    <button id="newCheckbox">Create a new to do list!</button>
    <button id="deleteList">Delete</button><br><br>
    <input id="inpHeading" type="text" /><br>
    <button id="newCheckbox">Create an item in your to do list!</button>
    <button id="deleteItem">Delete</button>
    <div id="container"></div>
        
    <!------------- JavaScript --------------->
    <script>

      
       let inpHeading = document.getElementById('inpHeading');
       let newCheckboxBtn = document.getElementById("newCheckbox");
       let deleteItem = document.getElementById("deleteItem");
       let container = document.getElementById("container");
       let json ={};
     

       newCheckboxBtn.addEventListener("click", function (evt) {

        let url= "/createToDoList";
        let token = localStorage.getItem("token");

        /*let checkbox= document.createElement("input");
        checkbox.type = "checkbox";
       // checkBox.id = 'checkbox' + count; // need unique Ids! 
         //checkBox.value = check_value[count] + '<br/>';
         let inputForCheckbox = document.createElement("input");
         inputForCheckbox.type = "text";
        let div= document.createElement("div");
        div.appendChild(checkbox);
        div.appendChild(inputForCheckbox);
       // div.id = Math.random(Math.floor())
        container.appendChild(div);
        for(let i=0; i < container.lenght; i ++) {
            div.id= container[i];
           
            
        }*/
        //alternativ 2
        //lager json= {} for ei liste
        //etterpå lager vi input for text, og etter text blir det lagret i arrayen, etterpå i cfg: body:json
        



        let updata = {
            heading: inpHeading.value,
            item: container
            //for se om container fungerer da
        }

        let cfg = {
            method:"POST",
            headers: {"content-type" : "application/json", "authorization" : token},
            body: JSON.stringify(updata)
        }

        try {
            let response =await fetch (url, cfg);
            let data= await response.json();

            if(response.status != 200) {
                throw data.error;
            }

          
        //hvis mouse over blir diven aktiv og den diven etter å ha trykt knappen skal kunne slettes 
        div.addEventListener("click", function(evt) {
            
        });
        deleteItem.addEventListener("click", function(evt) {

        })
    } 
    catch(error) {
        console.log(error);
    }

       });
        

       
        //alle  her skal legges til json fil for å bli lagret i databasen, for å kunne komme tilbke til den i showToDoLists.html
    </script>

    <!---------------- CSS ------------------->
    <style>        
* {
            
            margin: 0;
            font-family: sans-serif;
            background-color:rgb(163, 155, 144);
            color: rgb(9, 15, 12);
        }   
        input{
          background-color: rgb(248, 244, 239);
          opacity: 1;
      }
      button{
          background-color: rgb(126, 121, 121);
      }
    </style>

</body>

</html>