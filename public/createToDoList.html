<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>ToDoList</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>

    <!----------- HTML-elements -------------->
    <h1>To Do List</h1>
    <p>On this page you can write down important things you need to remember. <br>For example a shopping list.</p><br>
    <input id="inpHeading" type="text" placeholder="write a text here"/>
    <button id="newCheckbox">+</button>
    
    <div id="container"></div>
    
        
    <!------------- JavaScript --------------->
    <script>

      
      // let inpHeading = document.getElementById('inpHeading');
       let newCheckboxBtn = document.getElementById("newCheckbox");
      // let deleteItem = document.getElementById("deleteItem");
       //let container = document.getElementById("container");
       let items = [];
     

      


       newCheckboxBtn.addEventListener("click", function (evt) {

        let inputForCheckbox = document.createElement("input");
         inputForCheckbox.type = "text";

         let todo = {
            text: inputForCheckbox.value,
            id: Date.now(),
         };

         items.push(todo);

        let delBtn = document.createElement("button");
        delBtn.className="deleteList";
        delBtn.className+="fa fa-trash";
        
        delBtn.addEventListener("click",function(evt) {
            item.splice(todo,1);
        })

       });

       async function createToDoList(evt) {
        let url= "/createNewList";
        let token = localStorage.getItem("token");

       
        let updata = {
            heading: inpHeading.value,
            body: JSON.stringify(items)
        }

        let cfg = {
            method:"POST",
            headers: {"authorization" : token},
            body: JSON.stringify(updata)
        }

        try {
            let response =await fetch (url, cfg);
            let data= await response.json();

            if(response.status != 200) {
                throw data.error;
            }


    
    } 
    catch(error) {
        console.log(error);
    }

       }
        

       
        //alle  her skal legges til json fil for å bli lagret i databasen, for å kunne komme tilbke til den i showToDoLists.html
    </script>

    <!---------------- CSS ------------------->
    <style>        
* {
            text-align: center;
            margin: 0;
            font-family: sans-serif;
            background-color:rgb(163, 155, 144);
            color: rgb(9, 15, 12);
        }   
        input{
          background-color: rgb(248, 244, 239);
          opacity: 1;
      }
      button{
          background-color: rgb(47, 185, 34);
          border-radius: 90%;
      }
    </style>

</body>

</html>