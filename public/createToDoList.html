<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>ToDoList</title>
</head>
<body>

    <!----------- HTML-elements -------------->
    <h1>To Do List</h1>
    <input id="inpHeading" type="text" /><br>
    <button id="newCheckbox">Create an item in your to do list</button>
    <button id="deleteItem">Delete</button>
    <div id="container"></div>
        
    <!------------- JavaScript --------------->
    <script>

      
       let inpHeading = document.getElementById('inpHeading');
       let newCheckboxBtn = document.getElementById("newCheckbox");
       let deleteItem = document.getElementById("deleteItem");
       let container = document.getElementById("container");
     

       newCheckboxBtn.addEventListener("click", function (evt) {

        let url= "/createToDoList";

        let updata = {
            heading: inpHeading.value,
            item: container
            //for se om container fungerer da
        }

        let cfg = {
            method:"POST",
            headers: {"content-type" : "application/json"},
            body: JSON.stringify(updata)
        }
        try {
            let response =await fetch (url, cfg);
            let data= await response.json();

            if(response.status != 200) {
                throw data.error;
            }

            let checkbox= document.createElement("input");
        checkbox.type = "checkbox";
       // checkBox.id = 'checkbox' + count; // need unique Ids! 
         //checkBox.value = check_value[count] + '<br/>';
         let inputForCheckbox = document.createElement("input");
         inputForCheckbox.type = "text";
        let div= document.createElement("div");
        div.appendChild(checkbox);
        div.appendChild(inputForCheckbox);
       // div.id = Math.random(Math.floor())
        container.appendChild(div);
        for(let i=0; i < container.lenght; i ++) {
            div.id= container[i];
           
            
        }
        //hvis mouse over blir diven aktiv og den diven etter å ha trykt knappen skal kunne slettes 
        div.addEventListener("click", function(evt) {
            
        });
        deleteItem.addEventListener("click", function(evt) {

        })
    } 
    catch(error) {
        console.log(error);
    }

       });
        

       
        //alle  her skal legges til json fil for å bli lagret i databasen, for å kunne komme tilbke til den i showToDoLists.html
    </script>

    <!---------------- CSS ------------------->
    <style>        

    </style>

</body>

</html>